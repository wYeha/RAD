CREATE TABLE IF NOT EXISTS Departments (
	name VARCHAR(255) NOT NULL PRIMARY KEY, 
	budget NUMERIC(10, 2) NOT NULL
);

CREATE TABLE IF NOT EXISTS Categories (
	name VARCHAR(255) NOT NULL PRIMARY KEY,
	dep_name VARCHAR(255) NOT NULL REFERENCES Departments(name) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Expenses (
	cat_name VARCHAR(255) NOT NULL REFERENCES Categories(name) ON UPDATE CASCADE ON DELETE CASCADE,
	name VARCHAR(255) NOT NULL PRIMARY KEY,
	price NUMERIC(10, 2) NOT NULL
);

CREATE TABLE IF NOT EXISTS Exp_rep (
	id SERIAL NOT NULL PRIMARY KEY,
	dep_name VARCHAR(255) REFERENCES Departments(name) ON UPDATE CASCADE ON DELETE CASCADE,
	exp_name VARCHAR(255) REFERENCES Expenses(name) ON UPDATE CASCADE ON DELETE CASCADE,
	exp_date DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS Monthly_rep (
	dep_name VARCHAR(255) NOT NULL REFERENCES Departments(name) ON UPDATE CASCADE ON DELETE CASCADE,
	cat_name VARCHAR(255) NOT NULL REFERENCES Categories(name) ON UPDATE CASCADE ON DELETE CASCADE,
	exp_name VARCHAR(255) NOT NULL REFERENCES Expenses(name) ON UPDATE CASCADE ON DELETE CASCADE,
	month DATE NOT NULL,
	total NUMERIC(10, 2) NOT NULL,
	PRIMARY KEY(dep_name, cat_name, exp_name, month)
);